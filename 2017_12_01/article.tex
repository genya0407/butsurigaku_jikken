\documentclass[uplatex,11pt]{jsarticle}

\usepackage[dvipdfmx]{graphicx}
\usepackage{comment}
%\usepackage{listings, jlisting}
\usepackage{amsmath, amssymb}
\usepackage{wrapfig}
\usepackage{fancybox}
\usepackage{ascmac}
\usepackage{subfig}

\setlength\floatsep{5pt}
\setlength\textfloatsep{5pt}
\setlength\intextsep{5pt}
\setlength\abovecaptionskip{0pt}

\newcommand{\fg}[3]{ % \fg{label}{path}{caption},
    \begin{figure}
        \begin{center}
            \includegraphics[width=\textwidth]{#2}
            \caption{#3}
            \label{fg_#1}
        \end{center}
    \end{figure}
}

\newcommand{\dummyfig}[2]{
    \begin{figure}
        \begin{center}
            \begin{shadebox}
                手書きの図のため、巻末に添付
            \end{shadebox}
            \caption{#2}
            \label{fg_#1}
        \end{center}
    \end{figure}
}

\newcommand{\cir}[3]{ % \cir{label}{path}{caption},
    \begin{figure}
        \begin{center}
            \includegraphics[width=0.85\textwidth]{#2}
            \caption{#3}
            \label{fg_#1}
         \end{center}
    \end{figure}
}

\newcommand{\subtabs}[2]{
    \input{|"LC_CTYPE=C.UTF-8 ruby ./convert_csv.rb #1 1 '#2'"}
}

\newcommand{\tab}[4]{ % \tab{label}{csv-path}{caption}{分割数}
    \begin{table}[htb]
        \centering
        \caption{#3}
        \input{|"LC_CTYPE=C.UTF-8 ruby ./convert_csv.rb #2 #4"}
        \label{tab_#1}
    \end{table}
}

\newcommand{\fr}[1]{図\ref{fg_#1}}
\newcommand{\tr}[1]{表\ref{tab_#1}}
\newcommand{\er}[1]{式(\ref{#1})}

\begin{document}

\section{目的}

平面透過型解説酷使を用いて回折角の測定を行い、Na原子のスペクトルD線の波長を求める。

\section{データ}

\tab{data}{csv/data.csv}{各次数の光が現れた角度、またその波長}{1}

\section{解析}

\fg{data}{graph/a_with_calc.png}{各次数における波長}

\section{考察}
\section{結論}

\end{document}
